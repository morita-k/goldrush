<%= error_messages_for 'business_partner' %>

<% if @business_partner.new_record? %>
<h2>取引先</h2>

<input type=button value='登録済の取引先を選択' onClick="disp_wide('<%=url_for :controller => 'business_partner', :action => 'list', :popup =>1, :flg => 'eu,down,upper,self', :mail => 1 %>');return false;" />
<input type=button value='取引先情報クリア' onClick="clearBp();return false;" />
<% end %>

<table class="show_table">
<tr>
<th><label for="business_partner_business_partner_code"><%=getLongName('business_partners','business_partner_code')%>(任意英数3桁)</label></th><td><%= text_field 'business_partner', 'business_partner_code', :size => 10  %></td>
</tr>
<tr>
<th><label for="business_partner_sales_management_code"><%=getLongName('business_partners','sales_management_code')%></label></th><td><%= text_field 'business_partner', 'sales_management_code', :size => 10  %></td>
</tr>
<tr>
<th><label for="business_partner_business_partner_name"><%=getLongName('business_partners','business_partner_name')%>(*)</label></th><td><%= text_field 'business_partner', 'business_partner_name', :size => 50  %></td>
</tr>
<tr>
<th><label for="business_partner_business_partner_short_name"><%=getLongName('business_partners','business_partner_short_name')%>(*)</label></th><td><%= text_field 'business_partner', 'business_partner_short_name', :size => 50  %></td>
</tr>
<tr>
<th><label for="business_partner_business_partner_name_kana"><%=getLongName('business_partners','business_partner_name_kana')%>(株式会社は不要)(*)</label></th><td><%= text_field 'business_partner', 'business_partner_name_kana', :size => 50  %></td>
</tr>
<tr>
<th><label for="business_partner_business_partner_name_en"><%=getLongName('business_partners','business_partner_name_en')%></label></th><td><%= text_field 'business_partner', 'business_partner_name_en', :size => 50  %></td>
</tr>
<tr>
<th><label for="business_partner_sales_status_type"><%=getLongName('business_partners','sales_status_type')%></label></th><td><%= select 'business_partner', 'sales_status_type', getTypes('sales_status_type') %></td>
</tr>
<tr>
<th><label for="business_partner_basic_contract_status_type"><%=getLongName('business_partners','basic_contract_status_type')%></label></th><td><%= select 'business_partner', 'basic_contract_status_type', getTypes('basic_contract_status_type') %></td>
</tr>
<tr>
<th><label for="business_partner_nda_status_type"><%=getLongName('business_partners','nda_status_type')%></label></th><td><%= select 'business_partner', 'nda_status_type', getTypes('nda_status_type') %></td>
</tr>
<tr>
<th><label for="business_partner_ceo_name"><%=getLongName('business_partners','ceo_name')%></label></th><td><%= text_field 'business_partner', 'ceo_name'  %></td>
</tr>
<tr>
<th><label for="business_partner_url"><%=getLongName('business_partners','url')%></label></th><td><%= text_field 'business_partner', 'url', :size => 50  %></td>
</tr>
<tr>
<th><label for="business_partner_zip"><%=getLongName('business_partners','zip')%></label></th><td><%= text_field 'business_partner', 'zip', :size => 12  %></td>
</tr>
<tr>
<th><label for="business_partner_address1"><%=getLongName('business_partners','address1')%>(都道府県)</label></th><td><%= select 'business_partner', 'address1', User.get_prefs, {:include_blank => true} %></td>
</tr>
<tr>
<th><label for="business_partner_address2"><%=getLongName('business_partners','address2')%></label></th><td><%= text_field 'business_partner', 'address2'  %></td>
</tr>
<tr>
<th><label for="business_partner_tel"><%=getLongName('business_partners','tel')%></label></th><td><%= text_field 'business_partner', 'tel'  %></td>
</tr>
<tr>
<th><label for="business_partner_fax"><%=getLongName('business_partners','fax')%></label></th><td><%= text_field 'business_partner', 'fax'  %></td>
</tr>
<tr>
<th><label for="business_partner_email"><%=getLongName('business_partners','email')%></label></th><td><%= text_field 'business_partner', 'email'  %></td>
</tr>
<tr>
<th><label for="business_partner_category"><%=getLongName('business_partners','category')%></label></th><td><%= text_field 'business_partner', 'category'  %></td>
</tr>
<tr>
<th><label for="flg">フラグ</label></th><td>
  <%= check_box 'business_partner', 'self_flg'  %> 自社<br/>
  <%= check_box 'business_partner', 'eu_flg'  %> エンドユーザー<br/>
  <%= check_box 'business_partner', 'upper_flg'  %> 上位会社(人材メール対象)<br/>
  <%= check_box 'business_partner', 'down_flg'  %> 下位会社(案件メール対象)
</td>
</tr>
<th><label for="business_partner_category"><%=getLongName('business_partners','establishment_year')%></label></th><td><%= text_field 'business_partner', 'establishment_year'  %></td>
</tr>
<th><label for="business_partner_category"><%=getLongName('business_partners','employee_number')%></label></th><td><%= text_field 'business_partner', 'employee_number'  %></td>
</tr>
<th><label for="business_partner_category"><%=getLongName('business_partners','share_capital')%></label></th><td><%= text_field 'business_partner', 'share_capital'  %></td>
</tr>
<tr>
<th><label for="business_partner_memo"><%=getLongName('business_partners','memo')%></label></th><td><%= resizable_area 'business_partner', 'memo'  %></td>
</tr>
</table>
<!--[form:business_partner]-->
<!--[eoform:business_partner]-->


<%= hidden_field 'business_partner', 'lock_version' %>
<%= back_to_field_tag %>

<% if @business_partner.new_record? %>
<h2>取引先担当</h2>
<!--[form:bp_pic]-->
  <%= render :partial => 'bp_pic/form' %>
<!--[eoform:bp_pic]-->

<%= hidden_field 'business_partner', 'id' %>

<%= hidden_field 'business_partner', 'import_mail_id' %>
<%= hidden_field 'bp_pic', 'import_mail_id' %>


<script type="text/javascript">
<!--

document.setBpFull = function(bp) {
    document.getElementById("business_partner_id").value = bp.id
    document.getElementById("business_partner_business_partner_code").value = bp.business_partner_code
    document.getElementById("business_partner_sales_management_code").value = bp.sales_management_code
    document.getElementById("business_partner_business_partner_name").value = bp.business_partner_name
    document.getElementById("business_partner_business_partner_short_name").value = bp.business_partner_short_name
    document.getElementById("business_partner_business_partner_name_kana").value = bp.business_partner_name_kana
    document.getElementById("business_partner_business_partner_name_en").value = bp.business_partner_name_en
    document.getElementById("business_partner_sales_status_type").value = bp.sales_status_type
    document.getElementById("business_partner_ceo_name").value = bp.ceo_name
    document.getElementById("business_partner_url").value = bp.url
    document.getElementById("business_partner_zip").value = bp.zip
    document.getElementById("business_partner_address1").value = bp.address1
    document.getElementById("business_partner_address2").value = bp.address2
    document.getElementById("business_partner_tel").value = bp.tel
    document.getElementById("business_partner_fax").value = bp.fax
    document.getElementById("business_partner_email").value = bp.email
    document.getElementById("business_partner_category").value = bp.category
    document.getElementById("business_partner_establishment_year").value = bp.establishment_year
    document.getElementById("business_partner_employee_number").value = bp.employee_number
    document.getElementById("business_partner_share_capital").value = bp.share_capital
    document.getElementById("business_partner_self_flg").checked = (bp.self_flg==1)
    document.getElementById("business_partner_eu_flg").checked = (bp.eu_flg==1)
    document.getElementById("business_partner_upper_flg").checked = (bp.upper_flg==1)
    document.getElementById("business_partner_down_flg").checked = (bp.down_flg==1)
    document.getElementById("business_partner_memo").value = bp.memo
}

function clearBp(){
    document.getElementById("business_partner_id").value = "";
    document.getElementById("business_partner_business_partner_code").value = "";
    document.getElementById("business_partner_sales_management_code").value = "";
    document.getElementById("business_partner_business_partner_name").value = "";
    document.getElementById("business_partner_business_partner_short_name").value = "";
    document.getElementById("business_partner_business_partner_name_kana").value = "";
    document.getElementById("business_partner_business_partner_name_en").value = "";
    document.getElementById("business_partner_sales_status_type").value = "";
    document.getElementById("business_partner_ceo_name").value = "";
    document.getElementById("business_partner_url").value = "";
    document.getElementById("business_partner_zip").value = "";
    document.getElementById("business_partner_address1").value = "";
    document.getElementById("business_partner_address2").value = "";
    document.getElementById("business_partner_tel").value = "";
    document.getElementById("business_partner_fax").value = "";
    document.getElementById("business_partner_email").value = "";
    document.getElementById("business_partner_category").value = "";
    document.getElementById("business_partner_establishment_year").value = "";
    document.getElementById("business_partner_employee_number").value = "";
    document.getElementById("business_partner_share_capital").value = "";
    document.getElementById("business_partner_self_flg").checked = false;
    document.getElementById("business_partner_eu_flg").checked = false;
    document.getElementById("business_partner_upper_flg").checked = false;
    document.getElementById("business_partner_down_flg").checked = false;
    document.getElementById("business_partner_memo").value = "";
}

// -->
</script>
<% end %>
