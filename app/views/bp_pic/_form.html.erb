<%= error_messages_for 'bp_pic' %>

<!--[form:bp_pic]-->
<table class="show_table">
<tr>
<th><label for="bp_pic_bp_pic_name"><%=getLongName('bp_pics','bp_pic_name')%>(*)</label></th><td><%= text_field 'bp_pic', 'bp_pic_name'  %></td>
</tr>
<tr>
<th><label for="bp_pic_bp_pic_short_name"><%=getLongName('bp_pics','bp_pic_short_name')%>(*)</label></th><td><%= text_field 'bp_pic', 'bp_pic_short_name'  %></td>
</tr>
<tr>
<th><label for="bp_pic_bp_pic_name_kana"><%=getLongName('bp_pics','bp_pic_name_kana')%>(*)</label></th><td><%= text_field 'bp_pic', 'bp_pic_name_kana'  %></td>
</tr>
<tr>
<th><label for="bp_pic_depertment"><%=getLongName('bp_pics','depertment')%></label></th><td><%= text_field 'bp_pic', 'depertment'  %></td>
</tr>
<tr>
<th><label for="bp_pic_position"><%=getLongName('bp_pics','position')%></label></th><td><%= text_field 'bp_pic', 'position'  %></td>
</tr>
<tr>
<th><label for="bp_pic_tel_direct"><%=getLongName('bp_pics','tel_direct')%></label></th><td><%= text_field 'bp_pic', 'tel_direct'  %></td>
</tr>
<tr>
<th><label for="bp_pic_tel_mobile"><%=getLongName('bp_pics','tel_mobile')%></label></th><td><%= text_field 'bp_pic', 'tel_mobile'  %></td>
</tr>
<tr>
<th><label for="bp_pic_email1"><%=getLongName('bp_pics','email1')%>(*)</label></th><td><%= text_field 'bp_pic', 'email1'  %></td>
</tr>
<tr>
<th><label for="bp_pic_email2"><%=getLongName('bp_pics','email2')%></label></th><td><%= text_field 'bp_pic', 'email2'  %></td>
</tr>
<th><label for="bp_pic_contact_date"><%=getLongName('bp_pics','contact_date')%></label></th><td><%=date_field('bp_pic', 'contact_date') %></td>
</tr>
<th><label for="bp_pic_sales_pic_id"><%=getLongName('bp_pics','sales_pic_id')%></label></th><td><%= select('bp_pic', 'sales_pic_id', options_for_select(BpPic.select_content_list, @bp_pic.sales_pic_id), :include_blank => true) %></td>
</tr>
<th><label for="bp_pic_contact_mail_flg"><%=getLongName('bp_pics','contact_mail_flg')%></label></th><td><%= check_box('bp_pic', 'contact_mail_flg', {}, 1, 0) %></td>
</tr>
<tr>
<th><label for="bp_pic_nondelivery_score"><%=getLongName('bp_pics','nondelivery_score')%></label></th><td><%= text_field 'bp_pic', 'nondelivery_score'  %></td>
</tr>
<tr>
  <th><label for="bp_pic_working_status"><%=getLongName('bp_pics','working_status')%></th><td><%= select('bp_pic', 'working_status', getTypes('working_status'), :include_blank => false) %></td>
</tr>
<% unless @bp_pic.working? %>
  <tr>
    <th><label for="bp_pic_substitute_bp_pic_id">後任者</th>
    <td>
      <%= text_field_tag 'bp_pic_substitute_bp_pic_name', @bp_pic.substitute_bp_pic.blank? ? "" : @bp_pic.substitute_bp_pic.bp_pic_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %>
      <input type=button value='...' onClick="disp_wide('<%=url_for_bp_pic_popup :setSbBpPic%>');return false;" />
      <input type=button value='クリア' onClick="clearSbBpPic();return false;" />
      <%= hidden_field 'bp_pic', 'substitute_bp_pic_id' %>
    </td>
  </tr>
  <tr>
    <th><label for="bp_pic_change_to_business_partner_name">転職先</label></th>
    <td><%= text_field_tag 'bp_pic_change_to_business_partner_name', @bp_pic.change_to_bp_pic.blank? ? "" : @bp_pic.change_to_bp_pic.business_partner_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %></td>
  </tr>
  <tr>
    <th><label for="bp_pic_change_to_bp_pic_id">転職先担当</th>
    <td>
      <%= text_field_tag 'bp_pic_change_to_bp_pic_name', @bp_pic.change_to_bp_pic.blank? ? "" : @bp_pic.change_to_bp_pic.bp_pic_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %>
      <input type=button value='...' onClick="disp_wide('<%=url_for_bp_pic_popup :setChBpPic%>');return false;" />
      <input type=button value='クリア' onClick="clearChBpPic();return false;" />
      <%= hidden_field 'bp_pic', 'change_to_bp_pic_id' %>
    </td>
  </tr>
<% end %>
<tr>
  <th><label for="former_business_partner_name">前職取引先</label></th>
  <td><%= text_field_tag 'former_business_partner_name', @former_bp_pic.blank? ? "" : @former_bp_pic.business_partner_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %></td>
</tr>
<tr>
  <th><label for="former_bp_pic_name">前職取引先担当</th>
  <td>
    <%= text_field_tag 'former_bp_pic_name', @former_bp_pic.blank? ? "" : @former_bp_pic.bp_pic_name, :readOnly => true, :style => "background-color: silver;", :size => 30 %>
    <input type=button value='...' onClick="disp_wide('<%=url_for_bp_pic_popup :setFmBpPic%>');return false;" />
    <input type=button value='クリア' onClick="clearFmBpPic();return false;" />
    <%= hidden_field_tag 'former_bp_pic_id', params[:former_bp_pic_id] %>
　　</td>
</tr>
<tr>
<th><label for="bp_pic_memo"><%=getLongName('bp_pics','memo')%></label></th><td><%= resizable_area 'bp_pic', 'memo'  %></td>
</tr>
</table>

<!--[eoform:bp_pic]-->
<%= hidden_field 'bp_pic', 'lock_version' %>
<%= hidden_field 'bp_pic', 'business_partner_id' %>
<% if params[:import_mail_id] %>
  <input type="hidden" name="import_mail_id" value="<%= params[:import_mail_id] %>">
  <div style="color: gray;">※この取引先担当は、呼び出し元画面のメールに紐付きます。</div>
<% end %>
<% if params[:retired_bp_pic_id] %><%= hidden_field_tag 'retired_bp_pic_id', params[:retired_bp_pic_id] %><% end %>
<%= back_to_field_tag %>

<script type="text/javascript">
<!--

document.setSbBpPic = function(bp_pic){
    document.getElementById("bp_pic_substitute_bp_pic_id").value = bp_pic.id;
    document.getElementById("bp_pic_substitute_bp_pic_name").value = bp_pic.bp_pic_name;
}

function clearSbBpPic(){
    document.getElementById("bp_pic_substitute_bp_pic_id").value = "";
    document.getElementById("bp_pic_substitute_bp_pic_name").value = "";
}

document.setChBpPic = function(bp_pic){
    document.getElementById("bp_pic_change_to_bp_pic_id").value = bp_pic.id;
    document.getElementById("bp_pic_change_to_business_partner_name").value = bp_pic.business_partner_name;
    document.getElementById("bp_pic_change_to_bp_pic_name").value = bp_pic.bp_pic_name;
}

function clearChBpPic(){
    document.getElementById("bp_pic_change_to_bp_pic_id").value = "";
    document.getElementById("bp_pic_change_to_business_partner_name").value = "";
    document.getElementById("bp_pic_change_to_bp_pic_name").value = "";
}

document.setFmBpPic = function(bp_pic){
    document.getElementById("former_bp_pic_id").value = bp_pic.id;
    document.getElementById("former_business_partner_name").value = bp_pic.business_partner_name;
    document.getElementById("former_bp_pic_name").value = bp_pic.bp_pic_name;
}

function clearFmBpPic(){
    document.getElementById("former_bp_pic_id").value = "";
    document.getElementById("former_business_partner_name").value = "";
    document.getElementById("former_bp_pic_name").value = "";
}

// -->
</script>
